"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[200],{4789:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"advanced/custom-commands","title":"Custom Commands","description":"Extend Fastman with your own CLI commands.","source":"@site/docs/advanced/custom-commands.md","sourceDirName":"advanced","slug":"/advanced/custom-commands","permalink":"/fastman-cli/docs/advanced/custom-commands","draft":false,"unlisted":false,"editUrl":"https://github.com/acathon/fastman-cli/tree/main/docs/docs/advanced/custom-commands.md","tags":[],"version":"current","lastUpdatedAt":1770580452000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Utility Commands","permalink":"/fastman-cli/docs/commands/utilities"},"next":{"title":"Production Deployment","permalink":"/fastman-cli/docs/advanced/production-build"}}');var a=t(4848),o=t(8453);const r={sidebar_position:2},i="Custom Commands",d={},c=[{value:"Creating a Command",id:"creating-a-command",level:2},{value:"Command Structure",id:"command-structure",level:2},{value:"Signature Syntax",id:"signature-syntax",level:2},{value:"Getting Arguments and Options",id:"getting-arguments-and-options",level:2},{value:"Output Methods",id:"output-methods",level:2},{value:"Example: Database Backup Command",id:"example-database-backup-command",level:2},{value:"Registering Commands",id:"registering-commands",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"custom-commands",children:"Custom Commands"})}),"\n",(0,a.jsx)(n.p,{children:"Extend Fastman with your own CLI commands."}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-command",children:"Creating a Command"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"fastman make:command send-newsletter\n"})}),"\n",(0,a.jsx)(n.p,{children:"This creates a command file that you can register with your application."}),"\n",(0,a.jsx)(n.h2,{id:"command-structure",children:"Command Structure"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# commands/send_newsletter.py\nfrom fastman.commands.base import Command, register\nfrom fastman.console import Output\n\n@register\nclass SendNewsletterCommand(Command):\n    signature = "newsletter:send {--test}"\n    description = "Send newsletter to all subscribers"\n\n    def handle(self):\n        test_mode = self.flag("test")\n        \n        if test_mode:\n            Output.info("Running in test mode...")\n            recipient = "test@example.com"\n        else:\n            # Get subscribers from database\n            recipient = "all subscribers"\n        \n        Output.info(f"Sending newsletter to {recipient}...")\n        \n        # Your logic here\n        self._send_emails(test_mode)\n        \n        Output.success("Newsletter sent successfully!")\n    \n    def _send_emails(self, test_mode: bool):\n        # Implementation\n        pass\n'})}),"\n",(0,a.jsx)(n.h2,{id:"signature-syntax",children:"Signature Syntax"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"signature"})," attribute defines how your command is called:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'# Basic command\nsignature = "newsletter:send"\n\n# With required argument\nsignature = "newsletter:send {email}"\n\n# With optional argument (default value)\nsignature = "newsletter:send {email?}"\n\n# With options (flags)\nsignature = "newsletter:send {--test} {--limit=}"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"getting-arguments-and-options",children:"Getting Arguments and Options"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'def handle(self):\n    # Get positional argument (index 0)\n    email = self.argument(0)\n    \n    # Get optional argument with default\n    limit = self.argument(1, default="10")\n    \n    # Get named option\n    format_type = self.option("format", default="html")\n    \n    # Check if flag is present\n    is_test = self.flag("test")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"output-methods",children:"Output Methods"}),"\n",(0,a.jsx)(n.p,{children:"Fastman provides rich output methods:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from fastman.console import Output\n\n# Messages\nOutput.success("Operation completed!")\nOutput.error("Something went wrong")\nOutput.warn("This might be dangerous")\nOutput.info("Processing...")\n\n# Interactive\nconfirmed = Output.confirm("Are you sure?")\nname = Output.ask("Enter your name")\nchoice = Output.choice("Select option", ["A", "B", "C"])\n\n# Progress\nwith Output.progress(total=100) as progress:\n    for i in range(100):\n        # do work\n        progress.advance()\n\n# Tables\nOutput.table(\n    headers=["ID", "Name", "Email"],\n    rows=[\n        ["1", "John", "john@example.com"],\n        ["2", "Jane", "jane@example.com"],\n    ],\n    title="Users"\n)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"example-database-backup-command",children:"Example: Database Backup Command"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'@register\nclass BackupCommand(Command):\n    signature = "database:backup {--output=}"\n    description = "Create a database backup"\n\n    def handle(self):\n        output_path = self.option("output", default="backup.sql")\n        \n        Output.info("Starting database backup...")\n        \n        with Output.spinner("Creating backup..."):\n            self._create_backup(output_path)\n        \n        Output.success(f"Backup saved to {output_path}")\n    \n    def _create_backup(self, path: str):\n        import subprocess\n        subprocess.run([\n            "pg_dump", \n            "-h", "localhost",\n            "-U", "postgres",\n            "-d", "myapp",\n            "-f", path\n        ], check=True)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"registering-commands",children:"Registering Commands"}),"\n",(0,a.jsxs)(n.p,{children:["Commands decorated with ",(0,a.jsx)(n.code,{children:"@register"})," are automatically discovered. Make sure your command file is imported in your application."]}),"\n",(0,a.jsxs)(n.p,{children:["For project-specific commands, add to your ",(0,a.jsx)(n.code,{children:"app/commands/__init__.py"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from . import send_newsletter\nfrom . import backup\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var s=t(6540);const a={},o=s.createContext(a);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);