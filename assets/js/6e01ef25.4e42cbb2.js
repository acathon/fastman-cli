"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[235],{5969:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"advanced/tinker","title":"Interactive Shell (Tinker)","description":"Fastman\'s tinker command provides an interactive Python shell with your application context pre-loaded. Inspired by Laravel\'s Tinker, it\'s perfect for quick debugging, data exploration, and testing.","source":"@site/docs/advanced/tinker.md","sourceDirName":"advanced","slug":"/advanced/tinker","permalink":"/fastman-cli/docs/advanced/tinker","draft":false,"unlisted":false,"editUrl":"https://github.com/acathon/fastman-cli/tree/main/docs/docs/advanced/tinker.md","tags":[],"version":"current","lastUpdatedAt":1770582411000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Utility Commands","permalink":"/fastman-cli/docs/commands/utilities"},"next":{"title":"Custom Commands","permalink":"/fastman-cli/docs/advanced/custom-commands"}}');var r=s(4848),t=s(8453);const a={sidebar_position:3},l="Interactive Shell (Tinker)",d={},c=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Features",id:"features",level:2},{value:"Pre-loaded Database Session",id:"pre-loaded-database-session",level:3},{value:"IPython Support",id:"ipython-support",level:3},{value:"Tinker Tricks",id:"tinker-tricks",level:2},{value:"1. Quick Data Inspection",id:"1-quick-data-inspection",level:3},{value:"2. Create Test Data Quickly",id:"2-create-test-data-quickly",level:3},{value:"3. Update Records",id:"3-update-records",level:3},{value:"4. Delete Records",id:"4-delete-records",level:3},{value:"5. Raw SQL Queries",id:"5-raw-sql-queries",level:3},{value:"6. Explore Relationships",id:"6-explore-relationships",level:3},{value:"7. Test Services",id:"7-test-services",level:3},{value:"8. Inspect Model Schema",id:"8-inspect-model-schema",level:3},{value:"9. Check Environment",id:"9-check-environment",level:3},{value:"10. Bulk Operations",id:"10-bulk-operations",level:3},{value:"IPython Magic Commands",id:"ipython-magic-commands",level:2},{value:"Example: Timing Queries",id:"example-timing-queries",level:3},{value:"Tips",id:"tips",level:2}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"interactive-shell-tinker",children:"Interactive Shell (Tinker)"})}),"\n",(0,r.jsxs)(n.p,{children:["Fastman's ",(0,r.jsx)(n.code,{children:"tinker"})," command provides an interactive Python shell with your application context pre-loaded. Inspired by Laravel's Tinker, it's perfect for quick debugging, data exploration, and testing."]}),"\n",(0,r.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"fastman tinker\n"})}),"\n",(0,r.jsx)(n.p,{children:"This starts an interactive Python shell with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Database session (",(0,r.jsx)(n.code,{children:"db"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Application settings (",(0,r.jsx)(n.code,{children:"settings"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["SQLAlchemy ",(0,r.jsx)(n.code,{children:"Base"})," model"]}),"\n",(0,r.jsx)(n.li,{children:"All your models auto-imported"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,r.jsx)(n.h3,{id:"pre-loaded-database-session",children:"Pre-loaded Database Session"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> from app.features.user.models import User\n>>> users = db.query(User).all()\n>>> len(users)\n42\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ipython-support",children:"IPython Support"}),"\n",(0,r.jsx)(n.p,{children:"If IPython is installed, tinker uses it automatically for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Syntax highlighting"}),"\n",(0,r.jsx)(n.li,{children:"Tab completion"}),"\n",(0,r.jsx)(n.li,{children:"Better tracebacks"}),"\n",(0,r.jsxs)(n.li,{children:["Magic commands (",(0,r.jsx)(n.code,{children:"%history"}),", ",(0,r.jsx)(n.code,{children:"%timeit"}),", etc.)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pip install ipython\nfastman tinker\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"tinker-tricks",children:"Tinker Tricks"}),"\n",(0,r.jsx)(n.h3,{id:"1-quick-data-inspection",children:"1. Quick Data Inspection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Count records\n>>> db.query(User).count()\n150\n\n# Get first/last\n>>> db.query(User).first()\n<User id=1 email='admin@example.com'>\n\n>>> db.query(User).order_by(User.id.desc()).first()\n<User id=150 email='latest@example.com'>\n\n# Filter with conditions\n>>> db.query(User).filter(User.is_active == True).count()\n142\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-create-test-data-quickly",children:"2. Create Test Data Quickly"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'>>> from app.features.user.models import User\n>>> user = User(email="test@example.com", name="Test User")\n>>> db.add(user)\n>>> db.commit()\n>>> user.id\n151\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-update-records",children:"3. Update Records"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'>>> user = db.query(User).filter(User.email == "test@example.com").first()\n>>> user.name = "Updated Name"\n>>> db.commit()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-delete-records",children:"4. Delete Records"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> user = db.query(User).filter(User.id == 151).first()\n>>> db.delete(user)\n>>> db.commit()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-raw-sql-queries",children:"5. Raw SQL Queries"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'>>> from sqlalchemy import text\n>>> result = db.execute(text("SELECT COUNT(*) FROM users"))\n>>> result.scalar()\n150\n'})}),"\n",(0,r.jsx)(n.h3,{id:"6-explore-relationships",children:"6. Explore Relationships"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> user = db.query(User).first()\n>>> user.posts  # Lazy load related posts\n[<Post id=1>, <Post id=2>, <Post id=3>]\n\n>>> user.orders[-1].total  # Latest order total\nDecimal('99.99')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"7-test-services",children:"7. Test Services"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> from app.features.user.service import UserService\n>>> service = UserService(db)\n>>> service.get_active_users()\n[<User id=1>, <User id=2>, ...]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"8-inspect-model-schema",children:"8. Inspect Model Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> User.__table__.columns.keys()\n['id', 'email', 'name', 'password', 'is_active', 'created_at']\n\n>>> for col in User.__table__.columns:\n...     print(f\"{col.name}: {col.type}\")\nid: INTEGER\nemail: VARCHAR(255)\nname: VARCHAR(100)\n...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"9-check-environment",children:"9. Check Environment"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> settings.DATABASE_URL\n'postgresql://localhost/myapp'\n\n>>> settings.DEBUG\nTrue\n\n>>> settings.SECRET_KEY[:10]\n'abc123...'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"10-bulk-operations",children:"10. Bulk Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Bulk insert\n>>> users = [User(email=f"user{i}@test.com") for i in range(100)]\n>>> db.add_all(users)\n>>> db.commit()\n\n# Bulk update\n>>> db.query(User).filter(User.is_active == False).update({"is_active": True})\n>>> db.commit()\n\n# Bulk delete\n>>> db.query(User).filter(User.email.like("%@test.com")).delete()\n>>> db.commit()\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ipython-magic-commands",children:"IPython Magic Commands"}),"\n",(0,r.jsx)(n.p,{children:"When using IPython, these magic commands are helpful:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Command"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%history"})}),(0,r.jsx)(n.td,{children:"Show command history"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%timeit"})}),(0,r.jsx)(n.td,{children:"Time execution of a statement"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%who"})}),(0,r.jsx)(n.td,{children:"List all variables"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%whos"})}),(0,r.jsx)(n.td,{children:"Detailed variable list"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%reset"})}),(0,r.jsx)(n.td,{children:"Clear all variables"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%paste"})}),(0,r.jsx)(n.td,{children:"Paste from clipboard"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%edit"})}),(0,r.jsx)(n.td,{children:"Open editor for multi-line code"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-timing-queries",children:"Example: Timing Queries"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:">>> %timeit db.query(User).filter(User.is_active == True).all()\n2.34 ms \xb1 123 \xb5s per loop\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"tips",children:"Tips"}),"\n",(0,r.jsxs)(n.admonition,{title:"Use Rollback for Safety",type:"tip",children:[(0,r.jsx)(n.p,{children:"When experimenting with data changes, wrap operations in a transaction you can rollback:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'>>> user.name = "Oops"\n>>> db.rollback()  # Undo changes\n'})})]}),"\n",(0,r.jsx)(n.admonition,{title:"Exit Cleanly",type:"tip",children:(0,r.jsxs)(n.p,{children:["Always use ",(0,r.jsx)(n.code,{children:"exit()"})," or ",(0,r.jsx)(n.code,{children:"Ctrl+D"})," to exit tinker, which properly closes the database connection."]})}),"\n",(0,r.jsx)(n.admonition,{title:"Production Caution",type:"warning",children:(0,r.jsx)(n.p,{children:"Be careful running tinker in production! Any database changes are permanent. Consider using a read-only database connection for production debugging."})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);