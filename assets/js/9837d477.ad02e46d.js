"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[892],{6095:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"concepts/examples","title":"Architecture Examples","description":"Real-world examples for each architecture pattern.","source":"@site/docs/concepts/examples.md","sourceDirName":"concepts","slug":"/concepts/examples","permalink":"/fastman-cli/docs/concepts/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/acathon/fastman-cli/tree/main/docs/docs/concepts/examples.md","tags":[],"version":"current","lastUpdatedAt":1770580452000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Architecture Patterns","permalink":"/fastman-cli/docs/concepts/architecture"},"next":{"title":"Database & Migrations","permalink":"/fastman-cli/docs/concepts/database"}}');var s=r(4848),o=r(8453);const a={sidebar_position:4},i="Architecture Examples",c={},d=[{value:"Feature Pattern: E-Commerce API",id:"feature-pattern-e-commerce-api",level:2},{value:"Create the Project",id:"create-the-project",level:3},{value:"Scaffold Features",id:"scaffold-features",level:3},{value:"Project Structure",id:"project-structure",level:3},{value:"Example: Product Feature",id:"example-product-feature",level:3},{value:"API Pattern: Blog API",id:"api-pattern-blog-api",level:2},{value:"Create the Project",id:"create-the-project-1",level:3},{value:"Project Structure",id:"project-structure-1",level:3},{value:"Example: Posts API",id:"example-posts-api",level:3},{value:"Layer Pattern: Enterprise CRM",id:"layer-pattern-enterprise-crm",level:2},{value:"Create the Project",id:"create-the-project-2",level:3},{value:"Project Structure",id:"project-structure-2",level:3},{value:"Example: Customer Module",id:"example-customer-module",level:3},{value:"Comparison Summary",id:"comparison-summary",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"architecture-examples",children:"Architecture Examples"})}),"\n",(0,s.jsx)(t.p,{children:"Real-world examples for each architecture pattern."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"feature-pattern-e-commerce-api",children:"Feature Pattern: E-Commerce API"}),"\n",(0,s.jsx)(t.p,{children:"A product catalog with orders and user management."}),"\n",(0,s.jsx)(t.h3,{id:"create-the-project",children:"Create the Project"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"fastman new ecommerce-api --pattern=feature --database=postgresql\ncd ecommerce-api\n"})}),"\n",(0,s.jsx)(t.h3,{id:"scaffold-features",children:"Scaffold Features"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"fastman make:feature product --crud\nfastman make:feature order --crud\nfastman make:feature user --crud\nfastman install:auth jwt\n"})}),"\n",(0,s.jsx)(t.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"app/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u251c\u2500\u2500 database.py\n\u2502   \u2514\u2500\u2500 dependencies.py\n\u2502\n\u251c\u2500\u2500 features/\n\u2502   \u251c\u2500\u2500 auth/                    # JWT authentication\n\u2502   \u2502   \u251c\u2500\u2500 dependencies.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 router.py\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py\n\u2502   \u2502   \u251c\u2500\u2500 security.py\n\u2502   \u2502   \u2514\u2500\u2500 service.py\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 product/                 # Product catalog\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 router.py\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py\n\u2502   \u2502   \u2514\u2500\u2500 service.py\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 order/                   # Order management\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 router.py\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py\n\u2502   \u2502   \u2514\u2500\u2500 service.py\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 user/                    # User profiles\n\u2502       \u251c\u2500\u2500 models.py\n\u2502       \u251c\u2500\u2500 router.py\n\u2502       \u251c\u2500\u2500 schemas.py\n\u2502       \u2514\u2500\u2500 service.py\n\u2502\n\u2514\u2500\u2500 main.py\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example-product-feature",children:"Example: Product Feature"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/features/product/models.py\nfrom sqlalchemy import Column, Integer, String, Numeric, Text\nfrom app.core.database import Base\n\nclass Product(Base):\n    __tablename__ = "products"\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(200), nullable=False)\n    description = Column(Text)\n    price = Column(Numeric(10, 2), nullable=False)\n    stock = Column(Integer, default=0)\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"# app/features/product/schemas.py\nfrom pydantic import BaseModel\nfrom decimal import Decimal\n\nclass ProductBase(BaseModel):\n    name: str\n    description: str | None = None\n    price: Decimal\n    stock: int = 0\n\nclass ProductCreate(ProductBase):\n    pass\n\nclass ProductResponse(ProductBase):\n    id: int\n\n    class Config:\n        from_attributes = True\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"# app/features/product/service.py\nfrom sqlalchemy.orm import Session\nfrom .models import Product\nfrom .schemas import ProductCreate\n\nclass ProductService:\n    @staticmethod\n    def get_all(db: Session, skip: int = 0, limit: int = 100):\n        return db.query(Product).offset(skip).limit(limit).all()\n\n    @staticmethod\n    def get_by_id(db: Session, product_id: int):\n        return db.query(Product).filter(Product.id == product_id).first()\n\n    @staticmethod\n    def create(db: Session, product: ProductCreate):\n        db_product = Product(**product.model_dump())\n        db.add(db_product)\n        db.commit()\n        db.refresh(db_product)\n        return db_product\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/features/product/router.py\nfrom fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy.orm import Session\nfrom app.core.dependencies import get_db\nfrom .schemas import ProductCreate, ProductResponse\nfrom .service import ProductService\n\nrouter = APIRouter(prefix="/products", tags=["products"])\n\n@router.get("/", response_model=list[ProductResponse])\ndef list_products(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):\n    return ProductService.get_all(db, skip, limit)\n\n@router.get("/{product_id}", response_model=ProductResponse)\ndef get_product(product_id: int, db: Session = Depends(get_db)):\n    product = ProductService.get_by_id(db, product_id)\n    if not product:\n        raise HTTPException(status_code=404, detail="Product not found")\n    return product\n\n@router.post("/", response_model=ProductResponse, status_code=201)\ndef create_product(product: ProductCreate, db: Session = Depends(get_db)):\n    return ProductService.create(db, product)\n'})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"api-pattern-blog-api",children:"API Pattern: Blog API"}),"\n",(0,s.jsx)(t.p,{children:"A simple blog with versioned API."}),"\n",(0,s.jsx)(t.h3,{id:"create-the-project-1",children:"Create the Project"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"fastman new blog-api --pattern=api --database=sqlite\ncd blog-api\n"})}),"\n",(0,s.jsx)(t.h3,{id:"project-structure-1",children:"Project Structure"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"app/\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 v1/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 posts.py           # /api/v1/posts\n\u2502   \u2502   \u251c\u2500\u2500 comments.py        # /api/v1/comments\n\u2502   \u2502   \u2514\u2500\u2500 authors.py         # /api/v1/authors\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 v2/\n\u2502       \u2514\u2500\u2500 posts.py           # /api/v2/posts (new version)\n\u2502\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 post.py\n\u2502   \u251c\u2500\u2500 comment.py\n\u2502   \u2514\u2500\u2500 author.py\n\u2502\n\u251c\u2500\u2500 schemas/\n\u2502   \u251c\u2500\u2500 post.py\n\u2502   \u251c\u2500\u2500 comment.py\n\u2502   \u2514\u2500\u2500 author.py\n\u2502\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u2514\u2500\u2500 database.py\n\u2502\n\u2514\u2500\u2500 main.py\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example-posts-api",children:"Example: Posts API"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/models/post.py\nfrom sqlalchemy import Column, Integer, String, Text, ForeignKey, DateTime\nfrom sqlalchemy.orm import relationship\nfrom sqlalchemy.sql import func\nfrom app.core.database import Base\n\nclass Post(Base):\n    __tablename__ = "posts"\n\n    id = Column(Integer, primary_key=True)\n    title = Column(String(200), nullable=False)\n    slug = Column(String(200), unique=True)\n    content = Column(Text)\n    author_id = Column(Integer, ForeignKey("authors.id"))\n    published_at = Column(DateTime, server_default=func.now())\n\n    author = relationship("Author", back_populates="posts")\n    comments = relationship("Comment", back_populates="post")\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/api/v1/posts.py\nfrom fastapi import APIRouter, Depends, Query\nfrom sqlalchemy.orm import Session\nfrom app.core.database import get_db\nfrom app.models.post import Post\nfrom app.schemas.post import PostResponse, PostCreate\n\nrouter = APIRouter()\n\n@router.get("/posts")\ndef list_posts(\n    page: int = Query(1, ge=1),\n    per_page: int = Query(10, ge=1, le=100),\n    db: Session = Depends(get_db)\n):\n    skip = (page - 1) * per_page\n    posts = db.query(Post).offset(skip).limit(per_page).all()\n    total = db.query(Post).count()\n    \n    return {\n        "data": posts,\n        "meta": {\n            "page": page,\n            "per_page": per_page,\n            "total": total\n        }\n    }\n\n@router.get("/posts/{slug}")\ndef get_post(slug: str, db: Session = Depends(get_db)):\n    return db.query(Post).filter(Post.slug == slug).first()\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/main.py\nfrom fastapi import FastAPI\nfrom app.api.v1 import posts as v1_posts\nfrom app.api.v2 import posts as v2_posts\n\napp = FastAPI(title="Blog API")\n\n# API versioning\napp.include_router(v1_posts.router, prefix="/api/v1", tags=["v1"])\napp.include_router(v2_posts.router, prefix="/api/v2", tags=["v2"])\n'})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"layer-pattern-enterprise-crm",children:"Layer Pattern: Enterprise CRM"}),"\n",(0,s.jsx)(t.p,{children:"A complex CRM with clear separation of concerns."}),"\n",(0,s.jsx)(t.h3,{id:"create-the-project-2",children:"Create the Project"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"fastman new crm-api --pattern=layer --database=postgresql\ncd crm-api\n"})}),"\n",(0,s.jsx)(t.h3,{id:"project-structure-2",children:"Project Structure"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"app/\n\u251c\u2500\u2500 controllers/                 # Request handling\n\u2502   \u251c\u2500\u2500 customer_controller.py\n\u2502   \u251c\u2500\u2500 contact_controller.py\n\u2502   \u2514\u2500\u2500 deal_controller.py\n\u2502\n\u251c\u2500\u2500 services/                    # Business logic\n\u2502   \u251c\u2500\u2500 customer_service.py\n\u2502   \u251c\u2500\u2500 contact_service.py\n\u2502   \u2514\u2500\u2500 deal_service.py\n\u2502\n\u251c\u2500\u2500 repositories/                # Data access\n\u2502   \u251c\u2500\u2500 base_repository.py\n\u2502   \u251c\u2500\u2500 customer_repository.py\n\u2502   \u251c\u2500\u2500 contact_repository.py\n\u2502   \u2514\u2500\u2500 deal_repository.py\n\u2502\n\u251c\u2500\u2500 models/                      # Database models\n\u2502   \u251c\u2500\u2500 customer.py\n\u2502   \u251c\u2500\u2500 contact.py\n\u2502   \u2514\u2500\u2500 deal.py\n\u2502\n\u251c\u2500\u2500 schemas/                     # DTOs\n\u2502   \u251c\u2500\u2500 customer.py\n\u2502   \u251c\u2500\u2500 contact.py\n\u2502   \u2514\u2500\u2500 deal.py\n\u2502\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u2514\u2500\u2500 database.py\n\u2502\n\u2514\u2500\u2500 main.py\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example-customer-module",children:"Example: Customer Module"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/repositories/base_repository.py\nfrom typing import TypeVar, Generic, Type\nfrom sqlalchemy.orm import Session\n\nT = TypeVar("T")\n\nclass BaseRepository(Generic[T]):\n    def __init__(self, model: Type[T], db: Session):\n        self.model = model\n        self.db = db\n\n    def get_all(self, skip: int = 0, limit: int = 100):\n        return self.db.query(self.model).offset(skip).limit(limit).all()\n\n    def get_by_id(self, id: int):\n        return self.db.query(self.model).filter(self.model.id == id).first()\n\n    def create(self, data: dict):\n        instance = self.model(**data)\n        self.db.add(instance)\n        self.db.commit()\n        self.db.refresh(instance)\n        return instance\n\n    def update(self, id: int, data: dict):\n        instance = self.get_by_id(id)\n        if instance:\n            for key, value in data.items():\n                setattr(instance, key, value)\n            self.db.commit()\n            self.db.refresh(instance)\n        return instance\n\n    def delete(self, id: int):\n        instance = self.get_by_id(id)\n        if instance:\n            self.db.delete(instance)\n            self.db.commit()\n        return instance\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"# app/repositories/customer_repository.py\nfrom sqlalchemy.orm import Session\nfrom app.models.customer import Customer\nfrom .base_repository import BaseRepository\n\nclass CustomerRepository(BaseRepository[Customer]):\n    def __init__(self, db: Session):\n        super().__init__(Customer, db)\n\n    def find_by_email(self, email: str):\n        return self.db.query(Customer).filter(Customer.email == email).first()\n\n    def find_active(self):\n        return self.db.query(Customer).filter(Customer.is_active == True).all()\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/services/customer_service.py\nfrom sqlalchemy.orm import Session\nfrom app.repositories.customer_repository import CustomerRepository\nfrom app.schemas.customer import CustomerCreate\n\nclass CustomerService:\n    def __init__(self, db: Session):\n        self.repo = CustomerRepository(db)\n\n    def get_customers(self, skip: int = 0, limit: int = 100):\n        return self.repo.get_all(skip, limit)\n\n    def get_customer(self, customer_id: int):\n        return self.repo.get_by_id(customer_id)\n\n    def create_customer(self, data: CustomerCreate):\n        # Business logic: check for duplicate email\n        existing = self.repo.find_by_email(data.email)\n        if existing:\n            raise ValueError("Customer with this email already exists")\n        \n        return self.repo.create(data.model_dump())\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# app/controllers/customer_controller.py\nfrom fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy.orm import Session\nfrom app.core.database import get_db\nfrom app.services.customer_service import CustomerService\nfrom app.schemas.customer import CustomerCreate, CustomerResponse\n\nrouter = APIRouter(prefix="/customers", tags=["customers"])\n\ndef get_service(db: Session = Depends(get_db)):\n    return CustomerService(db)\n\n@router.get("/", response_model=list[CustomerResponse])\ndef list_customers(service: CustomerService = Depends(get_service)):\n    return service.get_customers()\n\n@router.post("/", response_model=CustomerResponse, status_code=201)\ndef create_customer(\n    data: CustomerCreate,\n    service: CustomerService = Depends(get_service)\n):\n    try:\n        return service.create_customer(data)\n    except ValueError as e:\n        raise HTTPException(status_code=400, detail=str(e))\n'})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"comparison-summary",children:"Comparison Summary"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Aspect"}),(0,s.jsx)(t.th,{children:"Feature"}),(0,s.jsx)(t.th,{children:"API"}),(0,s.jsx)(t.th,{children:"Layer"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Organization"})}),(0,s.jsx)(t.td,{children:"By domain"}),(0,s.jsx)(t.td,{children:"By version"}),(0,s.jsx)(t.td,{children:"By concern"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Best for"})}),(0,s.jsx)(t.td,{children:"Medium-large apps"}),(0,s.jsx)(t.td,{children:"Simple APIs"}),(0,s.jsx)(t.td,{children:"Enterprise"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Scalability"})}),(0,s.jsx)(t.td,{children:"Extract to microservices"}),(0,s.jsx)(t.td,{children:"Add versions"}),(0,s.jsx)(t.td,{children:"Add layers"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Learning curve"})}),(0,s.jsx)(t.td,{children:"Low"}),(0,s.jsx)(t.td,{children:"Low"}),(0,s.jsx)(t.td,{children:"Medium"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Code locality"})}),(0,s.jsx)(t.td,{children:"High"}),(0,s.jsx)(t.td,{children:"Medium"}),(0,s.jsx)(t.td,{children:"Low"})]})]})]})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>i});var n=r(6540);const s={},o=n.createContext(s);function a(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);