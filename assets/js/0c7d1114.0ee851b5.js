"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[916],{6970:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>t,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"commands/database","title":"Database Commands","description":"Manage your database schema, migrations, and seeds.","source":"@site/docs/commands/database.md","sourceDirName":"commands","slug":"/commands/database","permalink":"/fastman-cli/docs/commands/database","draft":false,"unlisted":false,"editUrl":"https://github.com/acathon/fastman-cli/tree/main/docs/docs/commands/database.md","tags":[],"version":"current","lastUpdatedAt":1770580452000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Scaffolding Commands","permalink":"/fastman-cli/docs/commands/scaffolding"},"next":{"title":"Utility Commands","permalink":"/fastman-cli/docs/commands/utilities"}}');var i=a(4848),r=a(8453);const t={sidebar_position:2},d="Database Commands",c={},l=[{value:"Migrations",id:"migrations",level:2},{value:"<code>make:migration</code>",id:"makemigration",level:3},{value:"<code>database:migrate</code>",id:"databasemigrate",level:3},{value:"<code>migrate:rollback</code>",id:"migraterollback",level:3},{value:"<code>migrate:reset</code>",id:"migratereset",level:3},{value:"<code>migrate:status</code>",id:"migratestatus",level:3},{value:"Seeding",id:"seeding",level:2},{value:"<code>database:seed</code>",id:"databaseseed",level:3},{value:"Creating Seeders",id:"creating-seeders",level:3}];function o(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"database-commands",children:"Database Commands"})}),"\n",(0,i.jsx)(s.p,{children:"Manage your database schema, migrations, and seeds."}),"\n",(0,i.jsx)(s.h2,{id:"migrations",children:"Migrations"}),"\n",(0,i.jsx)(s.h3,{id:"makemigration",children:(0,i.jsx)(s.code,{children:"make:migration"})}),"\n",(0,i.jsx)(s.p,{children:"Creates a new Alembic migration file."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'fastman make:migration "create users table"\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Arguments"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"message"}),': A brief description of the change (e.g., "create users table").']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"databasemigrate",children:(0,i.jsx)(s.code,{children:"database:migrate"})}),"\n",(0,i.jsx)(s.p,{children:"Runs all pending migrations."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"fastman database:migrate\n"})}),"\n",(0,i.jsx)(s.h3,{id:"migraterollback",children:(0,i.jsx)(s.code,{children:"migrate:rollback"})}),"\n",(0,i.jsx)(s.p,{children:"Rolls back the last batch of migrations. Prompts for confirmation before proceeding."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"fastman migrate:rollback [--steps=1]\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Options"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"--steps"}),": Number of migrations to rollback (default: 1)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"migratereset",children:(0,i.jsx)(s.code,{children:"migrate:reset"})}),"\n",(0,i.jsxs)(s.p,{children:["Rolls back all migrations, effectively emptying the database schema. Prompts for confirmation. ",(0,i.jsx)(s.strong,{children:"Use with caution."})]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"fastman migrate:reset\n"})}),"\n",(0,i.jsx)(s.h3,{id:"migratestatus",children:(0,i.jsx)(s.code,{children:"migrate:status"})}),"\n",(0,i.jsx)(s.p,{children:"Shows the current migration status (current revision)."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"fastman migrate:status\n"})}),"\n",(0,i.jsx)(s.h2,{id:"seeding",children:"Seeding"}),"\n",(0,i.jsx)(s.h3,{id:"databaseseed",children:(0,i.jsx)(s.code,{children:"database:seed"})}),"\n",(0,i.jsx)(s.p,{children:"Runs the database seeders to populate the database with initial data."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"fastman database:seed [--class=ClassName]\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Options"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"--class"}),": Run a specific seeder class by name or module (e.g., ",(0,i.jsx)(s.code,{children:"UserSeeder"})," or ",(0,i.jsx)(s.code,{children:"user_seeder"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{title:"Important",type:"tip",children:(0,i.jsxs)(s.p,{children:["Run this command from your ",(0,i.jsx)(s.strong,{children:"project root directory"})," (where your ",(0,i.jsx)(s.code,{children:"app/"})," folder is), not from inside subdirectories."]})}),"\n",(0,i.jsx)(s.h3,{id:"creating-seeders",children:"Creating Seeders"}),"\n",(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.code,{children:"make:seeder"})," to create a new seeder file:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"fastman make:seeder user\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This creates ",(0,i.jsx)(s.code,{children:"database/seeders/user_seeder.py"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'from app.features.user.models import User\n\nclass UserSeeder:\n    @staticmethod\n    def run(db):\n        users = [\n            User(name="Admin", email="admin@example.com"),\n            User(name="Test", email="test@example.com"),\n        ]\n        db.add_all(users)\n        db.commit()\n'})})]})}function m(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,s,a)=>{a.d(s,{R:()=>t,x:()=>d});var n=a(6540);const i={},r=n.createContext(i);function t(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);